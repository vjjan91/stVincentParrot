[["index.html", "Source code and supporting information for Passive acoustic monitoring of the St. Vincent’s Parrot Section 1 Introduction 1.1 Attribution 1.2 Data access 1.3 Data processing", " Source code and supporting information for Passive acoustic monitoring of the St. Vincent’s Parrot Vijay Ramesh Last compiled on 15 December, 2024 Section 1 Introduction This is the readable version that showcases analyses oof bioacoustic data for the St. Vincent’s parrot 1.1 Attribution Please contact the following in case of interest in the project. Vijay Ramesh (repo maintainer) Postdoctoral Research Associate, Cornell Lab of Ornithology 1.2 Data access The data used in this work will be archived on Zenodo. 1.3 Data processing The data processing for this project is described in the following sections. Navigate through them using the links in the sidebar. "],["site-selection.html", "Section 2 Site selection 2.1 Load necessary libraries 2.2 Load study area and associated shapefiles 2.3 Extracting elevation from previous survey points 2.4 Interactive visualization of existing survey locations 2.5 Manually edit and choose new points for the study 2.6 Convert the new survey locations to a dataframe 2.7 Create shapefiles for fieldwork 2.8 Saving an interactive file for collaborators 2.9 Create .gpx file for GPS", " Section 2 Site selection The aim of this script is to identify locations that are suitable to carry out acoustic monitoring of the St. Vincent’s parrot across St. Vincent. Specific factors to consider are distance between recorders, elevation, habitat type and logistical constraints. This script was initially generated during a workshop with the Forestry Department of St. Vincent and the Grenadines on Nov 4th 2024. Note: Load the workspace saved if you have already used functions from mapEdit to interactively edit the map and add locations. 2.1 Load necessary libraries library(sf) library(tidyverse) library(mapview) library(mapedit) library(purrr) library(terra) library(spatstat.random) # for plotting library(viridis) library(colorspace) library(scales) library(ggplot2) library(patchwork) library(fastmap) 2.2 Load study area and associated shapefiles First, we will plot shapefiles locations where points were chosen for a previous exploratory study. We currently have locations for Forestry Watchpoints, Gap points and previous and potential locations where AudioMoth recorders were and could be deployed. # load watchPoints watchPoints &lt;- st_read(&quot;data/spatial/watchPoints.shp&quot;) # load gap points gapPoints &lt;- st_read(&quot;data/spatial/All_gaps.shp&quot;) gapPoints &lt;- st_zm(gapPoints) # load potential audioMoth locations # the above points also contain locations from a previous deployment of the AudioMoths potentialAM &lt;-st_read(&quot;data/spatial/potentialAM.shp&quot;) potentialAM &lt;- st_zm(potentialAM) potentialAM &lt;- st_transform(potentialAM, crs = 32620) # new study design # the below shapefile contains random points chosen for the new survey surveyDesign &lt;- st_read(&quot;data/spatial/_strRndSmp_trails_10m_stratum.shp&quot;) surveyDesign &lt;- st_transform(surveyDesign, crs = 32620) 2.3 Extracting elevation from previous survey points We will extract elevation from previous survey locations and edit formatting for the existing objects prior to editing the same. # create bounding box/polygon interactively for St.Vincent # for the sake of this exercise, we created a bounding box that is larger than the total area required for sampling # Run the following two lines if you haven&#39;t previously executed the same # bbox &lt;- vis %&gt;% # editMap() # bounding box for elevation bb_stVincent &lt;- st_bbox(bbox$finished, crs = 4326) %&gt;% st_as_sfc() %&gt;% st_sf() %&gt;% st_transform(., crs = 32620) # load elevation alt &lt;- terra::rast(&quot;data/elevation/alos-30m.tif&quot;) # note: the following line of code can take a few minutes for execution alt &lt;- terra::project(alt, &quot;epsg:32620&quot;) alt.hills &lt;- terra::crop(alt, bb_stVincent) rm(alt) # add elevation to each of the above shapefiles/points by extracting them from the digital elevation model elev_watch &lt;- terra::extract(alt.hills, watchPoints); names(elev_watch) &lt;- c(&quot;ID&quot;,&quot;elev&quot;) elev_gap &lt;- terra::extract(alt.hills, gapPoints) names(elev_gap) &lt;- c(&quot;ID&quot;, &quot;elev&quot;) elev_potentialAM &lt;- terra::extract(alt.hills, potentialAM) names(elev_potentialAM) &lt;- c(&quot;ID&quot;,&quot;elev&quot;) elev_surveyDesign &lt;- terra::extract(alt.hills, surveyDesign) names(elev_surveyDesign) &lt;- c(&quot;ID&quot;,&quot;elev&quot;) # add elevation back to the shapefiles watchPoints &lt;- bind_cols(watchPoints, elev_watch[,2]) names(watchPoints)[2] &lt;- &quot;elev&quot; gapPoints &lt;- bind_cols(gapPoints, elev_gap[,2]) names(gapPoints)[11] &lt;- &quot;elev&quot; potentialAM &lt;- bind_cols(potentialAM, elev_potentialAM[,2]) names(potentialAM)[9] &lt;- &quot;elev&quot; surveyDesign &lt;- bind_cols(surveyDesign, elev_surveyDesign[,2]) names(surveyDesign)[6] &lt;- &quot;elev&quot; ## editing the files to indicate what type of point it is watchPoints$type &lt;- &quot;watchPoint&quot; gapPoints$type &lt;- &quot;gapPoint&quot; potentialAM$type &lt;- &quot;potentialAM&quot; surveyDesign$type &lt;- &quot;surveyDesign&quot; 2.4 Interactive visualization of existing survey locations # visualization and editing vis &lt;- mapview(watchPoints, col.regions = &quot;black&quot;, legend = NULL) + mapview(gapPoints, col.regions = &quot;white&quot;) + mapview(potentialAM, col.regions = &quot;green&quot;) + mapview(surveyDesign, col.regions = &quot;brown&quot;) vis 2.5 Manually edit and choose new points for the study At this stage, we work with Forestry agents from SVG to determine what points should be ultimately chosen for the monitoring of the St. Vincent’s parrot (If you have done this already, please skip and carry out other analysis) ## Using functions from mapedit ## Note: the following lines of code can open an interactive html file that can be edited ## Please ensure that you save it by clicking DONE after editing the points # Please only run the following two lines of code if you haven&#39;t previously run it # visEdit &lt;- vis %&gt;% # editMap() 2.6 Convert the new survey locations to a dataframe # first, we will backtransform the elevation coordinate system alt.hills &lt;- project(alt.hills, &quot;epsg:4326&quot;) # new survey locations surveyLocs &lt;- data.frame(visEdit$finished, terra::extract(alt.hills, visEdit$finished)) names(surveyLocs)[5] &lt;- &quot;elevation_in_metres&quot; surveyLocs$elevation_in_metres &lt;- as.numeric(as.character(surveyLocs$elevation_in_metres)) ## load the survey point attributes taken down earlier ## during the workshop on Nov 4th, 2024 - a .csv was co-created with the forestry department staff to figure out audio recorder deployment locations ## additional information on each location chosen interactively was added to separate columns ## in addition, a separate column was created to merge the survey location information (generated above interactively) with the attributes surveyAttr &lt;- read.csv(&quot;data/survey_pointAttributes.csv&quot;) ## add the survey attributes to the survey locations surveyLocs &lt;- right_join(surveyLocs, surveyAttr, by = c(&quot;ID&quot; = &quot;pointID_from_R&quot;)) ## Clean up the above file surveyLocs &lt;- surveyLocs[,c(3,5:9,11:13)] 2.7 Create shapefiles for fieldwork We will generate shapefiles that can be utilized for fieldwork. Please note that the surveyLocations.csv file generated below needs to be updated after fieldwork is carried out to include the updated locations when recorder deployment was carried out. surveyLocs &lt;- st_as_sf(surveyLocs) %&gt;% `st_crs&lt;-`(4326) # saving shapefiles for visualization/viewing in other softwares st_write(surveyLocs, &quot;data/spatial/surveyLocations.shp&quot;, driver = &quot;ESRI Shapefile&quot;) # write out latitude and longitude for .csv surveyLocs &lt;- surveyLocs %&gt;% dplyr::mutate(longitude = sf::st_coordinates(.)[,1], latitude = sf::st_coordinates(.)[,2]) write.csv(surveyLocs, &quot;data/survey_locations.csv&quot;, row.names = F) 2.8 Saving an interactive file for collaborators # to save this to a file # if you would like to share this with collaborators/colleagues html_fl &lt;- tempfile(tmpdir = getwd(), fileext = &quot;interactive-visualization-surveyLocations.html&quot;) ## load trails and range shapefiles before you take a screenshot trailA &lt;- st_read(&quot;data/spatial/trailA.shp&quot;) trailB &lt;- st_read(&quot;data/spatial/Trail_2.shp&quot;) trailC &lt;- st_read(&quot;data/spatial/Trails.shp&quot;) range &lt;- st_read(&quot;data/spatial/Range_B.shp&quot;) surveyMap &lt;- mapview(surveyLocs, col.regions = &quot;red&quot;) + mapview(trailA, col.regions = &quot;black&quot;) + mapview(trailB, col.regions = &quot;black&quot;) + mapview(trailC, col.regions = &quot;black&quot;) + mapview(range, col.regions = &quot;gray&quot;, alpha.regions = 0.01) # create standalone .html mapview::mapshot(surveyMap, url = html_fl) surveyMap 2.9 Create .gpx file for GPS Note that .gpx files are very sensitive to the .xml structure and the attributes need to be saved based on an appropriate format (For more information: https://www.topografix.com/GPX/1/1/#type_wptType). Once you create files in R, I would upload it in GPX Studio to make sure everything is accurate and save it again as a .gpx file to get the accurate format (https://gpx.studio/). # get only the attributes you need gpx &lt;- surveyLocs[,c(3,9)] # note that gpx files have specific metadata only, like name, elevation etc. names(gpx) &lt;- c(&quot;name&quot;,&quot;geometry&quot;) # sf and terra do not create .gpx files accurately: here, I have reverted to the use of rgdal # however, please note that rgdal was retired in 2023 and is no longer actively maintained # see git issue: https://github.com/r-spatial/sf/issues/2202 library(rgdal) gpx &lt;- as(gpx, &quot;Spatial&quot;) writeOGR(gpx, &quot;data/surveyLocations-for-conversion.gpx&quot;, driver = &quot;GPX&quot;, layer = &quot;waypoints&quot;) # Now, please upload the above file in GPX Studio to make sure everything is accurate and save it again as a .gpx file to get the accurate format (https://gpx.studio/). Once fieldwork has been completed, please include the updated .gpx files and .shp files in the results/outputs folders. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
